(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{69:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return i})),o.d(t,"metadata",(function(){return l})),o.d(t,"rightToc",(function(){return c})),o.d(t,"default",(function(){return u}));var n=o(2),r=o(6),a=(o(0),o(99)),i={id:"docker_troubleshoot",title:"Docker Troubleshooting",sidebar_label:"Troubleshooting"},l={unversionedId:"deploy/docker_troubleshoot",id:"deploy/docker_troubleshoot",isDocsHomePage:!1,title:"Docker Troubleshooting",description:"Troubleshooting",source:"@site/docs/deploy/docker_troubleshooting.md",slug:"/deploy/docker_troubleshoot",permalink:"/netsage-pipeline/docs/next/deploy/docker_troubleshoot",editUrl:"https://github.com/netsage-project/netsage-pipeline/edit/master/website/docs/deploy/docker_troubleshooting.md",version:"current",sidebar_label:"Troubleshooting",sidebar:"Pipeline",previous:{title:"Docker Advanced Installation Guide",permalink:"/netsage-pipeline/docs/next/deploy/docker_advanced"},next:{title:"Docker Guide",permalink:"/netsage-pipeline/docs/next/devel/docker"}},c=[{value:"Troubleshooting",id:"troubleshooting",children:[{value:"Data Flow issues:",id:"data-flow-issues",children:[]},{value:"Resource Limitations",id:"resource-limitations",children:[]},{value:"Export Data NFS Volume",id:"export-data-nfs-volume",children:[]}]}],s={rightToc:c};function u(e){var t=e.components,o=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},s,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(a.b)("h3",{id:"data-flow-issues"},"Data Flow issues:"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Troubleshooting checklist:")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Make sure you configured your routers to point to the correct address/port where the collector is running.\xa0 hostname:9999 is the default."),Object(a.b)("li",{parentName:"ul"},"Make sure you created a .env file and updated the settings accordingly."),Object(a.b)("li",{parentName:"ul"},"sensorName especially since that identifies the source of the data."),Object(a.b)("li",{parentName:"ul"},"check the logs of the various components to see if anything jumps out as being invalid.\xa0 docker-compose logs -f <service_label>")),Object(a.b)("h3",{id:"resource-limitations"},"Resource Limitations"),Object(a.b)("p",null,"If you are running a lot of data sometimes docker may need to be allocated more memory. The most\nlikely culprit is logstash which is usually only allocated 1GB of RAM. You'll need to update the jvm.options file to grant it more memory."),Object(a.b)("p",null,"Please see the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/netsage-pipeline/docs/next/deploy/docker_advanced#customize-logstash-settings"}),"advaned section")," for details on how to customize logstash"),Object(a.b)("p",null,"Applying this snippet to logstash may help. Naturally the values will have to change."),Object(a.b)("p",null,"You may also try the pattern below, if that still isn't enough."),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"environment: + LS_JAVA_OPTS=-Xmx3g\n")),Object(a.b)("p",null,"Alternatively you may also try doing this:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),'deploy:\n  resources:\n    limits:\n      cpus: "0.50"\n      memory: 50M\n    reservations:\n      cpus: "0.25"\n      memory: 20M\n')),Object(a.b)("p",null,"Reference: ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.docker.com/compose/compose-file/#resources"}),"https://docs.docker.com/compose/compose-file/#resources")),Object(a.b)("h3",{id:"export-data-nfs-volume"},"Export Data NFS Volume"),Object(a.b)("p",null,"By default most of the data that is exported will be relative to the ./data directory.  If you would like to use an NFS mount instead you will need to\neither "),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"export the NFS volume as ${PROJECT_DIR}/data (which is the idea scenario and least intrusive)"),Object(a.b)("li",{parentName:"ol"},"update the path to the NFS export path in all locations in docker-compose.yml and docker-compose.override.yml")),Object(a.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(a.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(a.b)("h5",{parentName:"div"},Object(a.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(a.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(a.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(a.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(a.b)("p",{parentName:"div"},"If you choose to update the docker-compose file, keep in mind that those changes will cause a merge conflict on upgrade.\nYou'll have to manage the volumes exported and ensure to update all the paths correctly for the next release manually."))))}u.isMDXComponent=!0},99:function(e,t,o){"use strict";o.d(t,"a",(function(){return p})),o.d(t,"b",(function(){return m}));var n=o(0),r=o.n(n);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function c(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var s=r.a.createContext({}),u=function(e){var t=r.a.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},p=function(e){var t=u(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=u(o),b=n,m=p["".concat(i,".").concat(b)]||p[b]||d[b]||a;return o?r.a.createElement(m,l(l({ref:t},s),{},{components:o})):r.a.createElement(m,l({ref:t},s))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=b;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var s=2;s<a;s++)i[s]=o[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,o)}b.displayName="MDXCreateElement"}}]);